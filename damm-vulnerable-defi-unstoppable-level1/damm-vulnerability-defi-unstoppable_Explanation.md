## Challenge:

The challenge, "Damn Vulnerable DeFi Challenge #1 - Unstoppable," focuses on a lending pool that offers flash loans for free. The objective is to disable the pool from offering flash loans `(Denial of Service attack)` while starting with a balance of 100 tokens.

## Vulnerability:

The vulnerability lies in the fact that the UnstoppableLender contract has two separate sources of truth for the pool balance: the internal poolBalance variable and the actual token balance obtained through the `balanceOf()` function. These two values can become out of sync, causing the contract to malfunction.

## Exploit:

The exploit involves transferring tokens directly to the contract address using the ERC20 `transfer()` function, bypassing the depositTokens() function. As a result, the poolBalance variable becomes out of sync with the actual token balance. This discrepancy causes the assertion in the flashLoan() function to fail, and the function reverts, preventing any further flash loans from being executed.

```javascript
it("Exploit", async function () {
  const attackTokenContract = token.connect(player);
  await attackTokenContract.transfer(
    vault.address,
    INITIAL_PLAYER_TOKEN_BALANCE
  );
});
```

## Takeaways:

To prevent such vulnerabilities, it is essential to maintain a single source of truth for important values like the pool balance. Avoid using separate variables that can become out of sync, and instead, rely on the contract's actual token balance.
